# 实验二--图书管理系统用例建模

|学号|班级|姓名|
|:-------:|:-------------: | :----------:|
|201511606101|软件(本)15-2|毕榆坚|

# 1. 图书管理系统PlantUML源码:
```
@startuml
left to right direction
skinparam packageStyle rectangle
actor 读者 as d
actor 图书管理员 as t
actor 系统管理员 as x
rectangle 图书管理系统用例图{

    d --> (查询借阅信息)
    d --> (预定图书)
    (预定图书)<..(取消预订):<<include>>
    d --> (借书)
    (借书)<..(续借):<<include>>
    d --> (还书)
    (还书)<..(交罚金):<<extend>>
    d --> (注册)
    d --> (修改个人信息)
    d --> (查询图书信息)
    d --> (登录)

    t --> (修改个人信息)
    t --> (查询图书信息)
    t --> (登录)
    t --> (添加图书)
    t --> (修改（删除）图书)
    t --> (解除预定)
    t --> (允许还书)
    (允许还书)<..(收罚金):<<extend>>
    t --> (允许借书)
    (允许借书)<..(允许续借):<<include>>

    (发布新公告) <-- x
    (管理图书管理员) <-- x
    (管理读者) <-- x
    (维护系统) <-- x
    (登录) <-- x
    (添加图书) <-- x
    (修改（删除）图书) <-- x
}
@enduml
```
![](images/test2_1.png)
# 2.“借书和续借”的PlantUML源码：
```
@startuml
    
    start;
    if(是否登录？) then(是)
        :查询图书信息;
        :选择目标图书;
        fork
        :点击续借;
        if(是否已续借一次？) then(是)
            :提示仅能续借一次;
            :续借失败;
        else(否)
            :续借成功;
        endif;
        fork again
        :点击借阅;
        if(是否有库存？) then(是)
            if(是否超出借阅上限？) then(是)
                :借书失败;
             else(否)
                :借书成功;
            endif;
        else(否)
            :提示没有库存;
            :借书失败;
        endif;
        endfork;
    else(否)
        :提示需要登录后才能借阅;
        :跳转到登录页面;
    endif;
    :借书（续借）流程结束;
    stop;
    
    @enduml
 ```
![](images/test2_2.png)
   
# 3.“登录注册”的的PlantUML源码
```
 @startuml
    
    start
    :输入账号;
    :输入密码;
    fork
    :登录;
    :选择读者或管理员身份;
    if(账号是否存在？) then(是)
        if(账号密码是否正确？) then(是)
            :登录成功;
            :进入首页;
         else(否)
            :提示用户账号密码错误;
            :重新登录;
         endif;
    else(否)
        :提示用户账号不存在;
        :重新登录;
    endif;
    fork again
    :注册;
    :再次确认密码;
    :输入验证码;
    if(账号是否存在？) then(是)
        :提示用户账号已存在;
        :注册失败;
    else(否)
        if(两次输入的密码是否相同？) then(是)
            :注册成功;
            :返回登录页面;
        else(否)
            :提示用户两次密码不同;
            :重新注册流程;
        endif;
    endif;
    endfork
    :登录注册流程结束;
    stop;
    
    @enduml
 ```
![](images/test2_3.png)


# 4.用例规约表

**4.1 "借阅图书"用例**

|标题|内容|
|:----------: | :----------:|
|用例名|借阅图书|
|参与者|普通管理员（主要参与者）、借书者（次要参与者）|
|前置条件|图书管理员已经登录且验证了借书者信息|
|后置条件|更新系统中的图书与借书者信息|
|主事件流|1.借书者登录系统提交需要借阅的书籍;<br />2.普通管理员验证当前用户是否有借阅资格及书籍是否能被借阅;<br />3.将借书者的信息及图书信息在数据库当中更新;<br />4.重复2-4步骤，直至用户需要借阅书籍统计完毕;<br />5.告知借书者借阅结果。|
|备注|每本书都是必须在数据库中有记录|

**4.2 "归还图书"用例**

|标题|内容|
|:----------: | :----------:|
|用例名|归还图书|
|参与者|普通管理员（主要参与者）、借书者（次要参与者）|
|前置条件|图书管理员已经登录且验证了借书者信息且借书者有借阅书籍|
|后置条件|更新系统中的图书与借书者信息|
|主事件流|1.借书者登录系统提交需要归还的书籍;<br />2.普通管理员验证当前用户是否有借阅书籍及书籍是否超期;<br />3.若超期计算罚金，借书者支付后方能还书;<br />4.将借书者的信息及图书信息在数据库当中更新;<br />5.重复2-4步骤，直至用户需要归还书籍统计完毕;<br />5.告知借书者归还结果。|
|备注|每本书都是必须在数据库中有记录|

**4.3 "借阅图书"用例流程图源码如下：**

```
@startuml

actor 普通管理员 as admin
actor 借书者 as user

left to right direction
rectangle {

admin -->(借出图书)
(借出图书) <-- user

}

@enduml

```

**4.3.1 "借阅图书"流程图如下**

![](images/test2_4.png)

**4.4 "归还图书"流程图如下**

```
@startuml

actor 普通管理员 as admin
actor 借书者 as user

left to right direction
rectangle {

admin -->(归还图书)
(归还图书)<..(超期计算罚金):<<extends>>
user --> (归还图书)

}
@enduml

```

![](images/test2_5.png)

## 5.参与者说明

**5.1 系统管理员**
主要职责是：
- 1.借书者信息维护
- 2.普通管理员信息维护
- 3.图书信息统计

**5.2 普通管理员**
主要职责是：
- 1.借书者操作信息处理
- 2.公告信息发布
- 3.接受用户罚金付款

**5.3 借书者**
主要职责是：
- 1.对图书的借阅、归还、查询
- 2.借阅对图书进行保管
- 3.按时归还图书，否则缴纳罚金
